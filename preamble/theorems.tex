\usepackage[framemethod=TikZ]{mdframed}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Theorem
\newcounter{theo}[section]\setcounter{theo}{0}
\renewcommand{\thetheo}{\arabic{section}.\arabic{theo}}
\newenvironment{theo}[2][]{%
\refstepcounter{theo}%
\ifstrempty{#1}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=black,line width=0.8pt,fill=white]
{\strut Theorem~\thetheo};}}}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=black,line width=0.8pt,fill=white]
{\strut Theorem~\thetheo:~#1};}}}%
\mdfsetup{innertopmargin=3pt, innerbottommargin=10pt, linecolor=black,%
linewidth=0.8pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox-0.6ex\relax}
\begin{mdframed}[]\relax\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Proposition
\newcounter{prop}[section]\setcounter{prop}{0}
\renewcommand{\theprop}{\arabic{section}.\arabic{prop}}
\newenvironment{prop}[2][]{%
\refstepcounter{prop}%
\ifstrempty{#1}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=black,line width=0.8pt,fill=white]
{\strut Proposition~\theprop};}}}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=black,line width=0.8pt,fill=white]
{\strut Proposition~\theprop:~#1};}}}%
\mdfsetup{innertopmargin=3pt, innerbottommargin=10pt, linecolor=black,%
linewidth=0.8pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox-0.6ex\relax}
\begin{mdframed}[]\relax\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Corollary
\newcounter{cor}[section]\setcounter{cor}{0}
\renewcommand{\thecor}{\arabic{section}.\arabic{cor}}
\newenvironment{cor}[2][]{%
\refstepcounter{cor}%
\ifstrempty{#1}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=black,line width=0.8pt,fill=white]
{\strut Corollary~\thecor};}}}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=black,line width=0.8pt,fill=white]
{\strut Corollary~\thecor:~#1};}}}%
\mdfsetup{innertopmargin=3pt, innerbottommargin=10pt, linecolor=black,%
linewidth=0.8pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox-0.6ex\relax}
\begin{mdframed}[]\relax\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Lemma
\newcounter{lem}[section] \setcounter{lem}{0}
\renewcommand{\thelem}{\arabic{section}.\arabic{lem}}
\newenvironment{lem}[2][]{%
\refstepcounter{lem}%
\ifstrempty{#1}{\mdfsetup{frametitle={%
  \tikz[baseline=(current bounding box.east),outer sep=0pt]
  \node[anchor=east,rectangle,draw=black,fill=white,line width=0.8pt]
  {\strut Lemma~\thelem};}}}{\mdfsetup{frametitle={%
  \tikz[baseline=(current bounding box.east),outer sep=0pt]
  \node[anchor=east,rectangle,draw=black,fill=white,line width=0.8pt]
  {\strut Lemma~\thelem:~#1};}}}%
\mdfsetup{innertopmargin=3pt, innerbottommargin=10pt, linecolor=black,
linewidth=0.8pt,topline=true,
frametitleaboveskip=\dimexpr-\ht\strutbox-0.6ex\relax}
\begin{mdframed}[]\relax\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definition
\newcounter{defn}[section]\setcounter{defn}{0}
\renewcommand{\thedefn}{\arabic{section}.\arabic{defn}}
\newenvironment{defn}[2][]{%
\refstepcounter{defn}%
\ifstrempty{#1}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=white,fill=white,line width=0.8pt]
{\strut Definition~\thedefn};}}}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=white,fill=white,line width=0.8pt]
{\strut Definition~\thedefn:~#1};}}}%
\mdfsetup{innertopmargin=-2pt, innerbottommargin=10pt, linecolor=black,%
linewidth=0.8pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox-0.5ex\relax}
\begin{mdframed}[]\relax\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Example
\newcounter{ex}[section]\setcounter{ex}{0}
\renewcommand{\theex}{\arabic{section}.\arabic{ex}}
\newenvironment{ex}[2][]{%
\refstepcounter{ex}%
\ifstrempty{#1}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=white,fill=white,line width=0.8pt]
{\strut Example~\theex};}}}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=white,fill=white,line width=0.8pt]
{\strut Example~\theex:~#1};}}}%
\mdfsetup{innertopmargin=-2pt, innerbottommargin=10pt, linecolor=black,%
linewidth=0.8pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox-0.5ex\relax}
\begin{mdframed}[]\relax\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Note
\newcounter{note}[section]\setcounter{note}{0}
\renewcommand{\thenote}{\arabic{section}.\arabic{note}}
\newenvironment{note}[2][]{%
\refstepcounter{note}%
\ifstrempty{#1}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=white,fill=white,line width=0.8pt]
{\strut Note~\thenote};}}}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=white,fill=white,line width=0.8pt]
{\strut Note~\thenote:~#1};}}}%
\mdfsetup{innertopmargin=-2pt, innerbottommargin=10pt, linecolor=black,%
linewidth=0.8pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox-0.5ex\relax}
\begin{mdframed}[]\relax\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Remark
\newcounter{rem}[section]\setcounter{rem}{0}
\renewcommand{\therem}{\arabic{section}.\arabic{rem}}
\newenvironment{rem}[2][]{%
\refstepcounter{rem}%
\ifstrempty{#1}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=white,fill=white,line width=0.8pt]
{\strut Remark~\therem};}}}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=white,fill=white,line width=0.8pt]
{\strut Remark~\therem:~#1};}}}%
\mdfsetup{innertopmargin=-2pt, innerbottommargin=10pt, linecolor=black,%
linewidth=0.8pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox-0.5ex\relax}
\begin{mdframed}[]\relax\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Conjecture
\newcounter{conj}[section]\setcounter{conj}{0}
\renewcommand{\theconj}{\arabic{section}.\arabic{conj}}
\newenvironment{conj}[2][]{%
\refstepcounter{conj}%
\ifstrempty{#1}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=white,fill=white,line width=0.8pt]
{\strut Conjecture~\theconj};}}}{\mdfsetup{frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,draw=white,fill=white,line width=0.8pt]
{\strut Conjecture~\theconj:~#1};}}}%
\mdfsetup{innertopmargin=-2pt, innerbottommargin=10pt, linecolor=black,%
linewidth=0.8pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox-0.5ex\relax}
\begin{mdframed}[]\relax\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Proof
\newenvironment{lined}{%
  \begin{mdframed}[%
    linecolor=black,
    linewidth=1pt,
    leftline=true,
    rightline=false,
    topline=false,
    bottomline=false,
    backgroundcolor=white,
    innertopmargin=6pt,
    innerbottommargin=6pt,
    innerleftmargin=10pt,
    innerrightmargin=10pt
  ]%
}{%
  \end{mdframed}
}

\NewDocumentEnvironment{prf}{}
  {\begin{lined}\begin{proof}[\textbf{Proof}]}
  {\end{proof}\end{lined}}
